<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>Google Maps - jQuery Mobile Demos</title>

		<!-- Include jQuery Mobile stylesheets -->
		  <link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css">
		<link rel="stylesheet" href="main.css">

		<link href='http://fonts.googleapis.com/css?family=Oswald:400,700,300' rel='stylesheet' type='text/css'>

		<!-- Include the jQuery library -->
		<script src="http://code.jquery.com/jquery-1.11.2.min.js"></script>
		<!-- Include the jQuery Mobile library -->
		<script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
		<script src="http://maps.google.com/maps/api/js?sensor=false"></script>
		<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false&libraries=places"></script> 

<script>
		/*
	 * Google Maps documentation: http://code.google.com/apis/maps/documentation/javascript/basics.html
	 * Geolocation documentation: http://dev.w3.org/geo/api/spec-source.html
	 */
	$( document ).on( "pageinit", "#map-page", function() {

	    var defaultLatLng = new google.maps.LatLng(43.468960, -79.699883);

	    // Default to Hollywood, CA when no geolocation support
	    if ( navigator.geolocation ) {
	        function success(pos) {
	            // Location found, show map with these coordinates
	            drawMap(new google.maps.LatLng(pos.coords.latitude, pos.coords.longitude));
	        }
	        function fail(error) {
	            drawMap(defaultLatLng);  // Failed to find location, show default map
	        }
	        // Find the users current position.  Cache the location for 5 minutes, timeout after 6 seconds
	        navigator.geolocation.getCurrentPosition(success, fail, {maximumAge: 500000, enableHighAccuracy:true, timeout: 6000});
	    } else {
	        drawMap(defaultLatLng);  // No geolocation support, show default map
	    }

	    function drawMap(latlng) {
	        var myOptions = {
	            zoom: 10,
	            center: latlng,
	            mapTypeId: google.maps.MapTypeId.ROADMAP
	        }

	        var map = new google.maps.Map(document.getElementById("map-canvas"), myOptions);
	        // Add an overlay to the map of current lat/lng
	        var marker = new google.maps.Marker({
	            position: latlng,
	            map: map,
	            title: "Greetings!"
	        });
	    }
	});

	$( window ).load(function() {

	var count=30;

		var counter=setInterval(timer, 1000); //1000 will  run it every 1 second

		function timer()
		{
		  count=count-1;
		  console.log(count);
		  if (count == 0)
		  {
		     clearInterval(counter);
		     return;
		  }

		 document.getElementById("countdown").innerHTML=count + " secs"; // watch for spelling
		}

	});



      $(document).on('swipeleft swiperight', function (event) {
       if(event.type == 'swiperight') {
        var prevpage = '#' + $.mobile.activePage.prev('div[data-role="page"]')[0].id;
        $.mobile.changePage(prevpage, {
         transition: 'slide',
         reverse: true
        });
       }

       if(event.type == 'swipeleft') {
        var nextpage = '#' + $.mobile.activePage.next('div[data-role="page"]')[0].id;
        $.mobile.changePage(nextpage, {
         transition: 'slide',
         reverse: false
        });
       }
      });



</script>

	</head>
	<body>

		<div data-role="page" id="pageone">

		    <div data-role="main" class="ui-content">
		    	<h1>HUNGRY YETI</h1>
		    	<p>Pick a place to eat before the yetti picks one for you! </p>
		    	<a href="#map-page" data-transition="slide" data-role="button">START!</a>
		    </div>
		</div> 

		<div data-role="page" id="map-page" data-url="map-page">
		    <div  id = "header" data-role="header" data-theme="a">
		    <h1 id = "countdown"></h1>
		    </div>
		    <div role="main" class="ui-content" id="map-canvas">
		     <!-- map loads here... -->
		    </div>
		</div>

	</body>
</html>